
# Pairing System Validation

This repo is cloned from USChess and made in collaboration with [KingArthur207](https://github.com/KingArthur207) and [AyushB08](https://github.com/AyushB08).


This repository contains the code for the Pairing System Validation project to validate the pairings generated by sioftware in order to validate the pairing software itself for commercial use to generate USCF tournament pairings.

## Endpoint to Endpoint Validation

#### Installation
  To install and run E2E validation,
run the code below in your terminal. 
Note: tmux will be installed on your system if you don't already have it.

```bash
  chmod +x run.sh
  ./run.sh
```
Go to [`http://localhost:3002`](http://localhost:3002/) after that to view the E2E validation. 

### Instructions For Client:
1. Client sends post requests to `/startValidation`, with an endpoint parameter in the body
2. The endpoint parameter should be the client's endpoint that the server will communicate with.
3. The client's endpoint should accept standings in the proposed format, see [`example_input.json`](https://github.com/US-CHESS/pairing-system-validation/blob/main/checker/inputs/t1/t1_s10_r1.json) for an example of a file the client will recieve.
4. The client's endpoint will then send back the file in the same format, but with the pairings. An example of a file that the user would send back can bee seen at [`example_response.json`](https://github.com/US-CHESS/pairing-system-validation/blob/main/checker/solutions/t1/t1_s10_r1_solution.json). This example response corresponds to the example input.
5. Our server will keep sending test cases like this to the client's endpoint, and then client's endpoint will respond in the way mentioned above.
6. We will validate the client's response and you can see live progress on our website as our server validates the client's software, at the end we will show how the client's software performed on the testcases and whether or not it is satisfactory.

## Manual File Upload Validation

1. Standings will be given in proposed format
2. User inserts standings into pairing software
3. User uploads outputted pairings to website
4. User will be notified if they passed or failed
5. Repeat

Format of ALL files will be in the regulated format discussed below.

## File Format (.JSON, .CSV)

#### JSON

The JSON format must have a (highest level in the hierarchy) key called "Sections" containing a list of objects for each section. Each object must have Section name, Type(0 for swiss), Number of players, Number of teams, rounds paired, rounds played, information on which rating to use with the Regular, Rapid and Blitz keys with true or false values, whether or not to use acceleration format for pairings, whether to use team pairings and a team cut number regardless of the former parameter.

A section object must also contain a "Players" key, with a value containing another list with objects for each player. Each player sub-object must contain keys for a Pair number, a Name, a Rating, and a results key. The results section must itself by a list of strings, one for each round paired. The values must be in the following format:

"Result; Op.; Clr"

Result is +, =, - for Win, Draw and Loss respectively(With U for withdrawal and B for a bye). Op. is the pair number of the opponent that the plaer faced during that round(-1 for a bye, 0 for a withdrawal), and Clr is 'W' or 'B' for white or black. The player keys in a player objects in the "Players" key must be named ['Pair number', 'Name', 'Rating', 'Results']. For result strings and player keys-value pairs, more key-values or values can be added, but it will not be required nor used buy the system. For example, if the result string also containts the board number, the format is still valid and the checker will not use the extra information.

A section object must also contain a "Teams" key containing the Team pair number, team Full name, Team code, Rating, and Results. Results encoding follow the same format as the player section. The team keys in a team object in the "Teams" key must be named ["Pair number", "Full name", "Team code", "Rating", "Results]

Finally, a section object must contain a "Byes" and a "Withdrawals" section, which contains a list of byes and withdrawals respectively. Each Bye must have keys ['Pair number', 'Round','Points'] representing the pair number for the player who is receiving a bye, which round they receive the bye in, and how many points for the bye, all three parameters as integers. Next, each withdrawal needs the key-pair values 'Pair number' and 'Rounds withdrawn' for the same purposes, though, this time, 'Rounds withdrawn' must be a list of integers containing the round numbers that the players are withdrawn

The keys for each Section object in the (higher order)"Sections" key of the object must be named as follows ['Section name', 'Type', 'Number of players', 'Number of teams', 'Rounds paired', 'Rounds played', 'Team cut', 'Regular', 'Rapid', 'Blitz', 'Acceleration', 'Use team pairings', 'Players', 'Teams']

Refer to the Testing_Files/Testing2_copy.json object for an exmaple valid JSON file.

#### CSV

To be defined.

## Repository Details

1. /client - Next.js (frontend)
2. /server - Express.js (backend)
